var CommentWidget=(()=>{(function(){"use strict";function r(){return document.querySelectorAll("[data-widget-form]")}function a(e){let d=e.querySelector('input[name="thread_id"]').value,t=document.getElementById(`ic-announcer-${d}`)||document.querySelector('[role="status"][aria-live="polite"]');e.addEventListener("submit",async s=>{s.preventDefault();let c=new FormData(e),n=e.querySelector('button[type="submit"]');n.disabled=!0,n.textContent="Enviando...",t&&(t.textContent="Enviando coment\xE1rio...");try{if((await fetch(e.action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(c))})).ok)e.reset(),n.textContent="Enviar Coment\xE1rio",n.disabled=!1,t&&(t.textContent="Coment\xE1rio enviado com sucesso! Aguardando modera\xE7\xE3o."),setTimeout(()=>{t&&(t.textContent=""),location.reload()},2e3);else throw new Error("Erro ao enviar coment\xE1rio")}catch(i){console.error("Erro no envio:",i),n.textContent="Enviar Coment\xE1rio",n.disabled=!1,t&&(t.textContent="Erro ao enviar coment\xE1rio. Tente novamente.")}})}function o(){let e=r();e.forEach(a),console.log(`Enhanced ${e.length} comment forms with AJAX`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o(),window.IndieComments=window.IndieComments||{},window.IndieComments.init=o})();})();
